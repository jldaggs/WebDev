<div ng-app="blogApp" ng-controller="blogCommentListController">
    <div class="container mt-5">
        <h2 class="pageTitle">{{ blog.blogTitle }}</h2>
        <div class="blog-entry">
            <div class="blog-entry-title">{{ blog.blogTitle }}</div>
            <div class="blog-entry-content">{{ blog.blogText }}</div>
            <div class="blog-entry-date">
                Posted by {{ blog.blogAuthor.name }} on {{ blog.createdAt | date:'mediumDate' }} at {{ blog.createdAt | date:'shortTime' }}
            </div>
            <div class="blog-entry-icons">
                <!-- Comments icon, shown to everyone -->
                <a ng-href="#!/blogs/comment/add/:blogId">
                    <i class="fa-solid fa-comment-medical"></i>          
                </a> 
                <!-- Like icon with like count, shown to everyone -->
                <i ng-class="{'fa-solid fa-heart': blog.isLikedByUser, 'fa-regular fa-heart': !blog.isLikedByUser}"
                ng-click="toggleLike(blog)"
                class="like-icon"></i> {{ blog.likeCount }}  
            </div>
        </div>
        <h3>Comments</h3>
        <div class="comment-list">
            <div class="comment-entry" ng-repeat="comment in comments">
                <div class="comment-author">Posted by: {{ comment.authorName }}</div>
                <div class="comment-text">{{ comment.text }}</div>
                <div class="comment-date">Posted on: {{ comment.createdAt | date:'mediumDate' }}</div>
                <div class="blog-entry-icons">
                    <!-- Edit/Delete only if the logged-in user is the author of the comment -->
                    <a ng-href="#!/blogs/comment/edit/{{ blog._id }}/{{ comment._id }}" ng-show="comment.authorId === AuthService.getUserId()">
                        <i class="fa-solid fa-pen-to-square"></i>
                    </a>
                    <a ng-href="#!/blogs/comment/delete/{{ blog._id }}/{{ comment._id }}" ng-show="comment.authorId === AuthService.getUserId()">
                        <i class="fa-solid fa-trash"></i>
                    </a>
                    <i ng-class="{'fa-solid fa-heart': comment.isLikedByUser, 'fa-regular fa-heart': !comment.isLikedByUser}"
                        ng-click="toggleLike(comment)" class="like-icon"></i> {{ comment.likesCount }}
                </div>
            </div>
        </div>
    </div>
</div>
